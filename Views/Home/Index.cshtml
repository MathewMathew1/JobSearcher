@{
    ViewData["Title"] = "Home";
}

<div class="container pb-5">
    <div class="py-5 text-center text-white"
        style="background: linear-gradient(90deg, #4e73df 0%, #1cc88a 100%); border-radius: 8px;">
        <h1 class="display-4 fw-bold">Welcome to JobSearcher</h1>
        <p class="lead">Your personal job search assistant across multiple platforms.</p>
    </div>

    <!-- HOW IT WORKS -->
    <div class="row mb-4 pt-2">
        <div class="col-md-12">
            <div class="card shadow-sm mb-3">
                <div class="card-body">
                    <h3 class="card-title pb-2 text-center">How It Works</h3>

                    <div class="row text-center mb-4">
                        <div class="col-md-3 mb-3">
                            <div class="card shadow-sm h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Automatic Reports</h5>
                                    <p class="card-text">Receive job reports directly in your email at the scheduled
                                        time in your timezone.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card shadow-sm h-100">
                                <div class="card-body">
                                    <h5 class="card-title">No Duplicates</h5>
                                    <p class="card-text">We ensure jobs are never repeated and stored securely in your
                                        account.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card shadow-sm h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Multi-Platform</h5>
                                    <p class="card-text">Search simultaneously on Indeed, Pracuj.pl, and Glassdoor with
                                        one account.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card shadow-sm h-100">
                                <div class="card-body">
                                    <h5 class="card-title">CV Analyzer</h5>
                                    <p class="card-text">Check how well your CV matches job descriptions and optimize
                                        your applications for better results.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- PROVIDERS -->
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card shadow-sm mb-3">
                <div class="card-body">
                    <h3 class="card-title text-center">Supported Providers</h3>
                    <p class="card-text ps-4">
                        Currently, JobSearcher fetches jobs from the following trusted providers:
                    </p>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><strong>Indeed:</strong> Large-scale job listings across multiple
                            industries and locations.</li>
                        <li class="list-group-item"><strong>Pracuj.pl:</strong> Popular platform for job offers in
                            Poland, covering IT, marketing, and more.</li>
                        <li class="list-group-item"><strong>Glassdoor:</strong> Offers company insights and job postings
                            for informed decisions.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- CONTACT / SUGGESTIONS SECTION -->
    <div class="card shadow-sm border-0 rounded-3 my-5">
        <div class="card-body p-4">
            <h3 class="text-center text-primary fw-bold mb-3">Have Feedback or Feature Ideas?</h3>
            <p class="text-center text-muted mb-4">Send a message directly to the developer. Your suggestions improve
                the app.</p>

            <form id="contactForm" class="mx-auto" style="max-width: 600px;">
                <div class="mb-3">
                    <label for="Email" class="form-label fw-semibold">Your Email</label>
                    <input type="email" class="form-control" id="Email" name="Email" placeholder="you@example.com"
                        required />
                </div>

                <div class="mb-3">
                    <label for="Subject" class="form-label fw-semibold">Subject</label>
                    <input type="text" class="form-control" id="Subject" name="Subject"
                        placeholder="Feature request, bug report..." required />
                </div>

                <div class="mb-3">
                    <label for="Message" class="form-label fw-semibold">Message</label>
                    <textarea class="form-control" id="Message" name="Message" rows="4"
                        placeholder="Describe your suggestion or problem..." required></textarea>
                </div>

                <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-success px-4">
                        <i class="bi bi-send me-2"></i>Send Message
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div class="row text-center mt-5">
        <div class="col-md-12">
            <p class="h5">Get started by <a asp-controller="Login" asp-action="Index">logging in</a> and setting up your
                first search!</p>
        </div>
    </div>
</div>


@section Scripts {
    <script>
        document.getElementById('contactForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            const formData = {
                Email: document.getElementById('Email').value.trim(),
                Subject: document.getElementById('Subject').value.trim(),
                Message: document.getElementById('Message').value.trim()
            };

            try {
                const response = await fetch('/Home/SendMessage', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    addToast({ message: 'Message sent successfully.', type: 'success' })
           
                    e.target.reset();
                } else {
                    console.log(response)
                    const errorText = await response.text();
                    addToast({ message: 'Failed to send message:', type: 'danger' })
                }
            } catch(e) {
                console.log(e)
                addToast({ message: 'Failed to send message:', type: 'danger' })
            }
        });


    </script>
}